{"version":3,"file":"modalforms.min.js","sources":["../src/modalforms.js"],"sourcesContent":["import ModalForm from 'core_form/modalform';\nimport {add as addToast} from 'core/toast';\n\nconst addNotification = (msg, type) => {\n    addToast(msg, {type: type});\n};\n\nexport const modalForm = (linkSelector, formClass, title, args = {...args, hidebuttons: args.hidebuttons ?? 1}) => {\n    document.querySelector(linkSelector).addEventListener('click', (e) => {\n        e.preventDefault();\n        const form = new ModalForm({\n            formClass,\n            args: args,\n            modalConfig: {title: title},\n            returnFocus: e.currentTarget\n        });\n        form.addEventListener(form.events.FORM_SUBMITTED, (e) => {\n            // Comes from process_dynamic_submission() in submitticketform.php\n            const response = e.detail;\n            const type = response.status == 200 ? 'success' : 'danger';\n            addNotification(response.message, type);\n        });\n        form.addEventListener(form.events.ERROR, (e) => addNotification('Oopsie - ' + e.detail.message));\n        form.show();\n    });\n\n};\n"],"names":["addNotification","msg","type","linkSelector","formClass","title","args","hidebuttons","document","querySelector","addEventListener","e","preventDefault","form","ModalForm","modalConfig","returnFocus","currentTarget","events","FORM_SUBMITTED","response","detail","status","message","ERROR","show"],"mappings":"yRAGMA,gBAAkB,CAACC,IAAKC,uBACjBD,IAAK,CAACC,KAAMA,2BAGA,SAACC,aAAcC,UAAWC,iCAAOC,4DAAO,IAAIA,KAAMC,sCAAaD,KAAKC,2DAAe,GACxGC,SAASC,cAAcN,cAAcO,iBAAiB,SAAUC,IAC5DA,EAAEC,uBACIC,KAAO,IAAIC,mBAAU,CACvBV,UAAAA,UACAE,KAAMA,KACNS,YAAa,CAACV,MAAOA,OACrBW,YAAaL,EAAEM,gBAEnBJ,KAAKH,iBAAiBG,KAAKK,OAAOC,gBAAiBR,UAEzCS,SAAWT,EAAEU,OACbnB,KAA0B,KAAnBkB,SAASE,OAAgB,UAAY,SAClDtB,gBAAgBoB,SAASG,QAASrB,SAEtCW,KAAKH,iBAAiBG,KAAKK,OAAOM,OAAQb,GAAMX,gBAAgB,YAAcW,EAAEU,OAAOE,WACvFV,KAAKY"}