{"version":3,"file":"modalforms.min.js","sources":["../src/modalforms.js"],"sourcesContent":["import ModalForm from 'core_form/modalform';\nimport {add as addToast} from 'core/toast';\nimport {getString} from 'core/str';\n\nconst addNotification = (msg, type) => {\n    addToast(msg, {type: type});\n};\n\nexport const modalForm = (linkSelector, formClass, title, args = {...args, hidebuttons: args.hidebuttons ?? 1}) => {\n    document.querySelector(linkSelector).addEventListener('click', (e) => {\n        e.preventDefault();\n        const form = new ModalForm({\n            formClass,\n            args: args,\n            modalConfig: {title: title},\n            saveButtonText: getString('sendtocampla', 'quizaccess_campla'),\n            returnFocus: e.currentTarget\n        });\n        form.addEventListener(form.events.FORM_SUBMITTED, (e) => {\n            // Comes from process_dynamic_submission() in sendtocamplaform.php\n            const response = e.detail;\n            const type = response.status == 200 ? 'success' : 'danger';\n            addNotification(response.message, type);\n        });\n        form.addEventListener(form.events.ERROR, (e) => addNotification('Oopsie - ' + e.detail.message));\n        form.show();\n    });\n\n};\n"],"names":["addNotification","msg","type","linkSelector","formClass","title","args","hidebuttons","document","querySelector","addEventListener","e","preventDefault","form","ModalForm","modalConfig","saveButtonText","returnFocus","currentTarget","events","FORM_SUBMITTED","response","detail","status","message","ERROR","show"],"mappings":"ySAIMA,gBAAkB,CAACC,IAAKC,uBACjBD,IAAK,CAACC,KAAMA,2BAGA,SAACC,aAAcC,UAAWC,iCAAOC,4DAAO,IAAIA,KAAMC,sCAAaD,KAAKC,2DAAe,GACxGC,SAASC,cAAcN,cAAcO,iBAAiB,SAAUC,IAC5DA,EAAEC,uBACIC,KAAO,IAAIC,mBAAU,CACvBV,UAAAA,UACAE,KAAMA,KACNS,YAAa,CAACV,MAAOA,OACrBW,gBAAgB,kBAAU,eAAgB,qBAC1CC,YAAaN,EAAEO,gBAEnBL,KAAKH,iBAAiBG,KAAKM,OAAOC,gBAAiBT,UAEzCU,SAAWV,EAAEW,OACbpB,KAA0B,KAAnBmB,SAASE,OAAgB,UAAY,SAClDvB,gBAAgBqB,SAASG,QAAStB,SAEtCW,KAAKH,iBAAiBG,KAAKM,OAAOM,OAAQd,GAAMX,gBAAgB,YAAcW,EAAEW,OAAOE,WACvFX,KAAKa"}